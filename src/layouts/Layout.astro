---
export interface Props {
  title?: string;
  description?: string;
  keywords?: string[];
  exam?: any;
}

const { 
  title = "TimeKeeper - Indian Exams Countdown 2026",
  description = "Ultimate countdown app for Indian competitive exams. Track JEE Mains, JEE Advanced, NEET, BITSAT, MHTCET, WBJEE and 25+ major Indian exams with real-time countdown timers.",
  keywords = ["Indian exams 2026", "JEE countdown", "NEET countdown", "exam timer", "competitive exams", "entrance exams"],
  exam
} = Astro.props;

const dynamicTitle = exam ? `${exam.name} 2026 Countdown Timer | ${exam.fullName} Exam Date` : title;
const dynamicDescription = exam ? exam.metaDescription : description;
const dynamicKeywords = exam ? exam.keywords.join(", ") : keywords.join(", ");

// Import PiP Widget
import PictureInPictureWidget from '../components/PictureInPictureWidget.astro';
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		
		<!-- SEO Meta Tags -->
		<title>{dynamicTitle}</title>
		<meta name="description" content={dynamicDescription} />
		<meta name="keywords" content={dynamicKeywords} />
		<meta name="robots" content="index, follow" />
		<meta name="author" content="TimeKeeper - JeeNeeTards Community" />
		
		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website" />
		<meta property="og:url" content={Astro.url} />
		<meta property="og:title" content={dynamicTitle} />
		<meta property="og:description" content={dynamicDescription} />
		<meta property="og:site_name" content="TimeKeeper - Indian Exams Countdown" />
		
		<!-- Twitter -->
		<meta property="twitter:card" content="summary_large_image" />
		<meta property="twitter:url" content={Astro.url} />
		<meta property="twitter:title" content={dynamicTitle} />
		<meta property="twitter:description" content={dynamicDescription} />
		
		<!-- Additional SEO -->
		<link rel="canonical" href={Astro.url} />
		<meta name="theme-color" content="#000000" />
		
		<!-- PWA Manifest -->
		<link rel="manifest" href="/manifest.json" />
		<meta name="mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<meta name="apple-mobile-web-app-title" content="TimeKeeper" />
		
		{exam && (
			<script type="application/ld+json" set:html={JSON.stringify({
				"@context": "https://schema.org",
				"@type": "Event",
				"name": exam.fullName,
				"description": exam.description,
				"startDate": exam.date,
				"eventStatus": "https://schema.org/EventScheduled",
				"eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
				"organizer": {
					"@type": "Organization",
					"name": exam.conductingBody
				},
				"offers": {
					"@type": "Offer",
					"price": exam.applicationFee,
					"priceCurrency": "INR"
				}
			})} />
		)}
		
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
	</head>
	<body class="font-sans">
		<slot />
		
		<!-- Picture-in-Picture Widget - Global -->
		<PictureInPictureWidget />
		
		<!-- Global Footer -->
		<footer class="border-t border-dashed border-zinc-300 bg-white mt-8">
			<div class="max-w-7xl mx-auto px-4 py-6">
				<div class="text-center space-y-3">
					<div class="flex items-center justify-center gap-2 text-sm text-zinc-600">
						<span class="font-serif italic">TimeKeeper</span>
						<span class="h-px w-4 bg-zinc-300"></span>
						<span>Indian Exams Countdown 2026</span>
					</div>
					<div class="text-xs text-zinc-500 max-w-2xl mx-auto">
						<p>
							<strong>Disclaimer:</strong> This service provides exam countdown timers for reference only. 
							We are not affiliated with any exam conducting body. All information is subject to change. 
							Please verify details from official sources before making decisions.
						</p>
					</div>
					<div class="text-xs text-zinc-400">
						<span>Built for students • © 2026 TimeKeeper</span>
					</div>
				</div>
			</div>
		</footer>
	</body>
</html>

<style is:global>
	html,
	body {
		margin: 0;
		width: 100%;
		height: 100%;
		font-family: 'Inter', sans-serif;
	}
	
	.font-serif {
		font-family: 'Playfair Display', serif;
	}
</style>
